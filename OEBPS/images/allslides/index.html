<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> </script>
<style>
img.slides { width: 50%; }
.prev, .next { display: inline-block; width:40px; height:40px; background-color: blue; margin:5px; }
.inactive { opacity: 0.5; }
</style>
</head>
<body>

<p class="slidescontainer" >
<img class="slides" src="./slidesalper/alper_01.jpg" rel="07" /><br />
<span class="controls">
<span class="prev slidecontr"> </span>
<span class="slideinfo"> </span>
<span class="next slidecontr"> </span>
</span></p>

<p class="slidescontainer">
<img class="slides" src="./slidescrosslab/Slide01.jpg" rel="78" /><br />
<span class="controls">
<span class="prev slidecontr"> </span>
<span class="slideinfo"> </span>
<span class="next slidecontr"> </span>
</span></p>

<p class="slidescontainer">
<img class="slides" src="./slidesirene/pigs.001.jpg" rel="22" /><br />
<span class="controls">
<span class="prev slidecontr"> </span>
<span class="slideinfo"> </span>
<span class="next slidecontr"> </span>
</span></p>

<p class="slidescontainer">
<img class="slides" src="./slidessue/sue_howtriggerbehaviour_Page_01.jpg" rel="20" /><br />
<span class="controls">
<span class="prev slidecontr"> </span>
<span class="slideinfo"> </span>
<span class="next slidecontr"> </span>
</span></p>

<script>

$('.slidescontainer').each(function(){
    $('.slideinfo',this).text('1/'+$("img.slides",this).attr('rel'));
    $('.prev',this).addClass('inactive');
});

$(".slidecontr").click(function(event){
    event.stopPropagation();
    if( $(this).hasClass('next') ){ i = 1; } 
    else if( $(this).hasClass('prev') ) { i = -1; }
    else { return false; }
    curURL = $("img.slides",$(this).parent().parent()).attr('src');
    curimg = curURL.substr(curURL.length - 6, 2);
    alert('curURL.substr(curURL.length - 6, 2): '+curURL.substr(curURL.length - 6, 2));
    nextimg = parseInt(curimg, 10) + i;
    alert('nextimg = parseInt(curimg, 10)+i: '+parseInt(curimg, 10)+i);
    slideSum = $("img.slides",$(this).parent().parent()).attr('rel');
    $('.prev,.next',$(this).parent().parent()).removeClass('inactive');
    if( nextimg>=slideSum ){ $('.next',$(this).parent().parent()).addClass('inactive'); }
    if( nextimg<=1 ){ $('.prev',$(this).parent().parent()).addClass('inactive'); }
    if( nextimg<=0 ){ return false; }
    if( nextimg>slideSum ){ return false; }
    $('.slideinfo',$(this).parent().parent()).text(nextimg+'/'+slideSum);
    if( nextimg<10 ) { nextimg = '0'+nextimg; }
    nextURL = curURL.replace(curimg, nextimg);
    $("img.slides",$(this).parent().parent()).attr('src', nextURL);
});

</script>
